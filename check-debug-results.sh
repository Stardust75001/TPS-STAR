#!/bin/bash

# TPS-STAR Results Checker
# Aide Ã  interprÃ©ter les rÃ©sultats de TPS.debug.enable()

echo "ğŸ” TPS-STAR DEBUG RESULTS CHECKER"
echo "================================="
echo ""
echo "ğŸ“‹ INSTRUCTIONS :"
echo "1. Allez sur votre site Shopify"
echo "2. Ouvrez la console (F12)"
echo "3. Tapez : TPS.debug.enable()"
echo "4. Comparez les rÃ©sultats avec ce guide :"
echo ""

echo "âœ… RÃ‰SULTAT ATTENDU (SUCCÃˆS) :"
echo ""
echo "ğŸ” TPS-STAR Debug Info"
echo "â”œâ”€ ğŸ“Š Config loaded: {"
echo "â”‚    ga4: \"G-E4NPI2ZZM3\","
echo "â”‚    meta_pixel_id: \"1973238620087976\","
echo "â”‚    sentry_dsn: \"https://your-dsn@sentry.io\","
echo "â”‚    clarity_id: \"tzvd9w6rjs\","
echo "â”‚    hotjar_id: \"6564192\","
echo "â”‚    cloudflare_beacon_token: \"21fd2470...\""
echo "â”‚  }"
echo "â”œâ”€ ğŸ¯ Active platforms: [\"ga4\", \"meta_pixel_id\", \"clarity_id\", \"hotjar_id\"]"
echo "â””â”€ ğŸ”— TPS object: {integrations: {...}, debug: {...}}"
echo ""

echo "âŒ PROBLÃˆMES POSSIBLES :"
echo ""
echo "1. ReferenceError: Can't find variable: TPS"
echo "   âœ RedÃ©ployez snippets/integrations.liquid"
echo ""
echo "2. Config loaded: { ga4: \"\", meta_pixel_id: \"\", ... }"
echo "   âœ Configurez les metafields Shopify"
echo ""
echo "3. Config loaded: { ..., meta_pixel_id: null, ... }"
echo "   âœ VÃ©rifiez les valeurs des metafields"
echo ""

echo "ğŸ”§ ACTIONS IMMÃ‰DIATES SI PROBLÃˆME :"
echo ""
echo "A. VÃ©rifiez les Metafields :"
echo "   - Admin Shopify â†’ Settings â†’ Metafields â†’ Shop"
echo "   - Namespace: custom_integrations"
echo "   - Type: Single line text"
echo "   - âš ï¸ ACTIVEZ 'Storefront API access' pour chaque champ !"
echo ""

echo "B. Champs Requis :"
echo "   ga4_token â†’ G-E4NPI2ZZM3"
echo "   meta_pixel_id â†’ 1973238620087976"
echo "   sentry_dsn â†’ votre-dsn-complet"
echo "   clarity_id â†’ tzvd9w6rjs"
echo "   hotjar_id â†’ 6564192"
echo "   cloudflare_beacon_token â†’ 21fd2470..."
echo ""

echo "C. Tests Additionnels dans la Console :"
echo "   typeof TPS                    // devrait Ãªtre 'object'"
echo "   typeof fbq                    // devrait Ãªtre 'function' (Meta)"
echo "   typeof clarity               // devrait Ãªtre 'function' (Clarity)"
echo "   typeof hj                    // devrait Ãªtre 'function' (Hotjar)"
echo ""

echo "ğŸ¯ LOGS ATTENDUS DANS LA CONSOLE :"
echo "   [TPS-STAR] System initialized"
echo "   ğŸªŸ Clarity loaded: tzvd9w6rjs"
echo "   ğŸ”¥ Hotjar loaded: 6564192"
echo "   [TPS] meta id: 1973238620087976 string"
echo "   [TPS-STAR] Meta Pixel initialized: 1973238620087976"
echo ""

echo "ğŸ“± Si tout fonctionne, vÃ©rifiez les dashboards :"
echo "   - Microsoft Clarity: https://clarity.microsoft.com"
echo "   - Hotjar: https://insights.hotjar.com"
echo "   - GA4: https://analytics.google.com"
echo "   - Meta Business: https://business.facebook.com/events_manager"
echo ""

echo "ğŸ†˜ Si vous avez encore des problÃ¨mes :"
echo "   Copiez-collez EXACTEMENT ce que vous voyez dans la console"
echo "   et partagez-le pour un diagnostic prÃ©cis !"
